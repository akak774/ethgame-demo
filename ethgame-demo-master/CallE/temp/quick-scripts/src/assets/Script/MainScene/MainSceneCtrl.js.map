{"version":3,"sources":["assets\\Script\\MainScene\\MainSceneCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Global from \"../App/Global\";\nimport { LocMsg } from \"../BaseModel/MsgEvent\";\nimport { IRobot } from \"../Model/RobotProp\";\nimport RobotInforCtrl, { INFOR_STATE } from \"./RobotInforCtrl\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Helloworld extends cc.Component {\n\n    @property(cc.Animation)\n    menuAnim: cc.Animation = null;\n\n\n    @property(cc.Node)\n    centerRoot: cc.Node = null;\n\n    @property([cc.Prefab])\n    centerPref: cc.Prefab[] = [];\n\n    @property(RobotInforCtrl)\n    robotInforCtrl: RobotInforCtrl = null;\n\n    private curCenterGroupIndex: number = 0;\n    private centerGroupIsMoving: boolean = false;\n    private centerGroups: cc.Node[] = [];\n    private _mapEventBind: Map<string, Function> = null;\n    protected onLoad(): void {\n        // this.menuAnim.play('menu_reset');\n\n        let homeCenter = cc.instantiate(this.centerPref[0]);\n        homeCenter.position.x = 0;\n        this.centerRoot.addChild(homeCenter);\n        let friendCenter = cc.instantiate(this.centerPref[1]);\n        this.centerRoot.addChild(friendCenter);\n        let backpackCenter = cc.instantiate(this.centerPref[2]);\n        this.centerRoot.addChild(backpackCenter);\n        let shopCenter = cc.instantiate(this.centerPref[3]);\n        this.centerRoot.addChild(shopCenter);\n        this.centerGroups = this.centerRoot.children;\n\n        this._InitListener();\n    }\n    private _InitListener() {\n        this._mapEventBind = new Map<string, Function>();\n        this._mapEventBind.set(LocMsg.SHOW_ROBOT_INFOR.toString(), this._ShowRobotDialog);\n\n        this._mapEventBind.forEach((value, event) => {\n            Global.Inst.On(event, value.bind(this), this);\n        });\n    }\n\n    private _ShowRobotDialog(data: IRobot, state: INFOR_STATE) {\n        if (this.robotInforCtrl.node.active) return;\n        this.robotInforCtrl.setDialog(data, state);\n\n    }\n\n    start() {\n\n    }\n\n    OnBtnClick(event, customEventData) {\n        let lastCenterGroupIndex = parseInt(customEventData);\n        if (this.curCenterGroupIndex === lastCenterGroupIndex || this.centerGroupIsMoving) return;\n\n        //左滑动；\n        this.centerGroupIsMoving = true;\n        let lastCenterPosX = this.curCenterGroupIndex < lastCenterGroupIndex ? this.node.width : -this.node.width;\n        let moveTime = 0.1;\n        let oldIndex = this.curCenterGroupIndex;\n\n        this.centerGroups[lastCenterGroupIndex].active = true;\n        this.centerGroups[lastCenterGroupIndex].x = lastCenterPosX;\n        this.centerGroups[this.curCenterGroupIndex].runAction(cc.sequence(cc.moveTo(moveTime, cc.v2(-lastCenterPosX, 0)), cc.callFunc(() => {\n            this.centerGroupIsMoving = false;\n            this.centerGroups[oldIndex].active = false;\n\n        })));\n        this.centerGroups[lastCenterGroupIndex].runAction(cc.sequence(cc.moveTo(moveTime, cc.v2(0, 0)), cc.callFunc(() => {\n        })));\n\n        this.curCenterGroupIndex = lastCenterGroupIndex;\n\n\n    }\n}\n"]}